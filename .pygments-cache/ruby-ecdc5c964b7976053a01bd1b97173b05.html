<div class="highlight"><pre><span class="n">users</span> <span class="o">=</span> <span class="sx">%w{&lt;br/&gt;</span>
<span class="sx">   alice:10.23.52.112:true&lt;br/&gt;</span>
<span class="sx">   bob:192.168.10.34:false&lt;br/&gt;</span>
<span class="sx"> }</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;p&gt; user_regexp = %r{&lt;br/</span><span class="o">&gt;</span>
   <span class="p">(?</span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span> <span class="o">[</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="o">]+</span> <span class="p">){</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
   <span class="p">(?</span><span class="o">&lt;</span><span class="n">ip_number</span><span class="o">&gt;</span> <span class="o">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="o">]</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span> <span class="p">){</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
   <span class="p">(?</span><span class="o">&lt;</span><span class="n">ip_address</span><span class="o">&gt;</span> <span class="p">(\</span><span class="n">g</span><span class="o">&lt;</span><span class="n">ip_number</span><span class="o">&gt;.</span><span class="p">){</span><span class="mi">3</span><span class="p">}\</span><span class="n">g</span><span class="o">&lt;</span><span class="n">ip_number</span><span class="o">&gt;</span> <span class="p">){</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
   <span class="p">(?</span><span class="o">&lt;</span><span class="n">admin</span><span class="o">&gt;</span> <span class="kp">true</span> <span class="o">|</span> <span class="kp">false</span> <span class="p">){</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
   <span class="p">\</span><span class="n">g</span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="p">:\</span><span class="n">g</span><span class="o">&lt;</span><span class="n">ip_address</span><span class="o">&gt;</span><span class="p">:\</span><span class="n">g</span><span class="o">&lt;</span><span class="n">admin</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
 <span class="p">}</span><span class="n">x</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;p&gt;users.each do |u|&lt;/</span><span class="nb">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">r</span> <span class="o">=</span> <span class="n">user_regexp</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>  
<span class="nb">puts</span> <span class="s2">&quot;User </span><span class="si">#{</span><span class="n">r</span><span class="o">[</span><span class="ss">:username</span><span class="o">]</span><span class="si">}</span><span class="s2"> is from </span><span class="si">#{</span><span class="n">r</span><span class="o">[</span><span class="ss">:ip_address</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>  
<span class="o">&lt;</span><span class="sr">/code&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span><span class="k">end</span>
</pre>
</div>
