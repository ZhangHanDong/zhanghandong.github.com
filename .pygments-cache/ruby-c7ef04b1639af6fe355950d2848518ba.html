<div class="highlight"><pre><span class="n">users</span> <span class="o">=</span> <span class="sx">%w{  </span>
<span class="sx">   alice:10.23.52.112:true  </span>
<span class="sx">   bob:192.168.10.34:false  </span>
<span class="sx"> }</span>  
   
 <span class="n">user_regexp</span> <span class="o">=</span> <span class="sr">%r{  </span>
<span class="sr">   (?&lt;username&gt; [a-z]+ ){0}  </span>
<span class="sr">   (?&lt;ip_number&gt; [0-9]{1,3} ){0}  </span>
<span class="sr">   (?&lt;ip_address&gt; (\g&lt;ip_number&gt;\.){3}\g&lt;ip_number&gt; ){0}  </span>
<span class="sr">   (?&lt;admin&gt; true | false ){0}  </span>
<span class="sr">   \g&lt;username&gt;:\g&lt;ip_address&gt;:\g&lt;admin&gt;  </span>
<span class="sr"> }x</span>  
  
<span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">u</span><span class="o">|</span>  
    <span class="n">r</span> <span class="o">=</span> <span class="n">user_regexp</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>  
    <span class="nb">puts</span> <span class="s2">&quot;User </span><span class="si">#{</span><span class="n">r</span><span class="o">[</span><span class="ss">:username</span><span class="o">]</span><span class="si">}</span><span class="s2"> is from </span><span class="si">#{</span><span class="n">r</span><span class="o">[</span><span class="ss">:ip_address</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>  
<span class="k">end</span>
</pre>
</div>
